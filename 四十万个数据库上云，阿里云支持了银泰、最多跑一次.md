# 四十万个数据库上云，阿里云支持了银泰、最多跑一次.md

银泰，是百货行业爱“吃螃蟹”的人。

2007年3月，银泰百货在香港联交所挂牌上市，成为第一家在港交所上市的中国大陆百货公司。2010年，银泰网上线，两年销售收入近6亿。2012年，公司推出VVIP俱乐部，会员组群能享受更多积分与优惠。2013年，所有实体店完成免费wifi铺设，注册账号顾客能享受个性化信息服务。

对于互联网技术的应用和商业场景的结合，银泰越发熟练。这得益于银泰CEO陈晓东。这位热衷新技术的零售业风云人物，在2014年就认定“银泰未来的方向是大数据驱动的消费解决方案提供商。”

然而，银泰的数字化进程在2016年遇到了麻烦——由于商品、营销、会员管理系统中大量使用了传统数据库，花费的硬件以及软件费用以百万级递增，IT设施开销仅数据库一项就将超过千万。

真的有这么贵？！

银泰数据库负责人李亚博介绍，银泰此前应用的传统数据库分为两类，分别是核心交易数据库（包括会员、营销、商品等）和支撑型数据库（包括OA、财务、BI报表等）。由于该传统数据库需要采用集群+存储来支持，仅一套集群+存储的硬件价格就要200万左右。每台机器的使用寿命，大概是三至四年。期间，还要算上机架和软件维护等费用，“这个价格就更高了。”

“这些年，随着商品、交易以及会员的数量越来越多，数据库的扩容是刚需。但在扩容的时候，还要保证系统的可用性，这个线下数据库的操作就相当复杂了。”

此外，传统数据库运维有着一套十分复杂的逻辑，只有经过DBA认证的工程师才有资格进行。“所以，每次数据库出现问题，都需要等DBA人员专程来进行维护。这也意味着，传统数据库的性能某种程度上就是受限于DBA人员的技术水平。”

几位技术负责人碰头开了个会，如果想彻底解决这个问题，解决方案只有一个：用云上数据库。而中国互联网行业里，最早遭遇“数据库”瓶颈的是阿里巴巴。

十年前，阿里的数据库堪称国内数据量最大、数据并发最高。然而，由于交易量激增，传统数据库带来的高额成本以及运维问题，最终使得阿里巴巴开启了去IOE的大幕，开始应用自研的技术解决。银泰也在2016年决定逐步从传统数据库搬迁到阿里云数据库上。

银泰数据库负责人李亚博介绍，针对不同的数据库类型，银泰设计了两步走的策略——先将核心数据库上云，再搬支撑型数据库。“核心系统的搬迁应用了阿里云工具对原有数据库业务逻辑代码进行了优化；支持性数据库应用PPAS数据库，其能够在兼容传统数据库存储过程中，最大程度的降低成本。”

<div style="text-align:center" align="center">
<img src="/images/四十万个数据库上云，阿里云支持了银泰、最多跑一次1.png" align="center" />
</div>
</br>

利用阿里云中间件，银泰技术团队将原来会员库的所有数据以及逻辑整体搬迁至阿里云。不久后，银泰商品等核心数据库也陆续搬迁到云上。2017年夏天，银泰在百货行业里第一个推出了有偿会员卡服务，云上数据库坚挺地支撑住了线上会员大量增加带来的冲击。感受到了云数据库强大的能力，银泰决定将其余的线下数据库也搬迁上来。

2018年，核心营销数据库、支持型数据库、行政类数据库也相继搬迁到云上。云数据库很快有了用武之地。为了应对2018年双11，银泰在10月开始进行数据库扩容。根据全链路压测数据，技术团队决定将数据库扩容到原来的3倍。

“当天的流量在12点以后持续增加，在20点达到峰值。最终的交易峰值是平时交易峰值的20倍。云上数据库平稳地支持了流量洪峰，而费用也远低于传统数据库。”

消费者持续的购物热情一直延续到11月下旬。技术团队也在当月开始决定“缩容”，云上数据库最终资源保留了原来的一半。“根据商业场景来调整云上数据库资源，这在传统的硬件数据库时代是完全无法想象的。”

李亚博介绍，到今年双11，银泰系统的全部数据库都将迁移到云数据库上：“这意味着我们不仅可以应用PolarDB最先进的数字技术，也将极大解放运维人员。”

像李亚博一样，越来越多的技术人开始认同云数据库，应用云数据库。

5月21日，阿里云PolarDB发布重大更新，提供传统数据库一键迁移上云能力，可以帮助企业将线下的MySQL、PostgreSQL和Oracle等数据库轻松上云，最快数小时内迁移完成。据估算，云上成本不到传统数据库的1/6。目前，已有约40万个数据库迁移到阿里云上。

<div style="text-align:center" align="center">
<img src="/images/四十万个数据库上云，阿里云支持了银泰、最多跑一次2.png" align="center" />
</div>
</br>

天津通卡是专业从事电子支付、智慧交通的国家级高新技术企业。应用阿里云数据库，天津通卡支持当地公交IC卡收费管理系统每分钟可处理超过 5 万次交易数据，7.2亿数据查询功能响应时间低于 1 秒。

网新恩普在浙江省最多跑一次项目要对诸多业务系统做改造，为了快速适应云上开发工作，网新恩普选择了阿里云数据库。据了解，云数据库最大限度地实现了传统数据库的语法和特性，使项目数据库迁移难度降到最低，为项目改造节省大量时间和成本。

此外，国内某知名运营商的互联网业务支撑系统，基于阿里云分布式技术架构构建的中心化BSS，包括选号、营业、账务、计费等核心系统，也已全量采用阿里云分布式数据库替代传统数据库，支撑在网5亿用户的线上业务。

阿里云智能数据库事业部负责人李飞飞认为，数据库正从马车时代向汽车时代转变，云原生数据库在成本、灵活度、安全、技术进化层面都优于传统数据库，“传统数据库会像马车一样被更为先进的汽车即云原生数据库淘汰。”
